session.name = "APP"
session.cookie_domain = .app.com
session.cookie_secure = true
session.save_handler = redis
session.save_path    = tcp://localhost:6379
hhvm.hack.lang.look_for_typechecker = false
hhvm.server_variables['ENV'] = 'production'

hhvm.server.source_root = /var/www/app/app
hhvm.server.port = 80
hhvm.server.fix_path_info = true
hhvm.virtual_host[cdn][prefix] = res.
hhvm.virtual_host[cdn][server_name] = res.app.com
hhvm.virtual_host[cdn][path_translation] = ../assets
hhvm.virtual_host[default][rewrite_rules][api][pattern] = (/api/.*)
hhvm.virtual_host[default][rewrite_rules][api][to] = /api.hh$1
hhvm.virtual_host[default][rewrite_rules][api][qsa] = true
hhvm.virtual_host[default][rewrite_rules][index][pattern] = (.*)
hhvm.virtual_host[default][rewrite_rules][index][to] = /main.hh$1
hhvm.virtual_host[default][rewrite_rules][index][qsa] = true

hhvm.server.enable_ssl = true
hhvm.server.ssl_port = 443
hhvm.server.ssl_certificate_dir = /etc/letsencrypt/live/app.com
hhvm.server.ssl_certificate_file = fullchain.pem
hhvm.server.ssl_certificate_file = privkey.pem

hhvm.server.ssl_next_protocols[] = h2-14
hhvm.server.ssl_next_protocols[] = spdy/3.1
hhvm.server.ssl_next_protocols[] = http/1.1

hhvm.server.default_document = main.php
hhvm.server.error_document404 = main.php
hhvm.server.error_document500 = /var/www/app/app/500.hh

hhvm.server.forbidden_as404 = true
hhvm.server.forbidden_file_extensions[] = ".php"
hhvm.server.forbidden_file_extensions[] = ".hh"
hhvm.server.forbidden_file_extensions[] = ".git"

hhvm.server.enable_static_content_from_disk = true

hhvm.server.expose_hphp = false
hhvm.server.upload.enable_upload_progress = true
hhvm.server.graceful_shutdown_wait = 1000
hhvm.server.gzip_compression_level = 5

hhvm.server.thread_round_robin = true
hhvm.dynamic_extensions[mongodb]=/var/www/app/external/mongodb.so
